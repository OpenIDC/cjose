[![Build Status](https://github.com/OpenIDC/cjose/actions/workflows/build.yml/badge.svg)](https://github.com/OpenIDC/cjose/actions/workflows/build.yml)
[![Architectures Status](https://github.com/OpenIDC/cjose/actions/workflows/archs.yml/badge.svg)](https://github.com/OpenIDC/cjose/actions/workflows/archs.yml)
[![CodeQL Analysis](https://github.com/OpenIDC/cjose/actions/workflows/codeql-analysis.yml/badge.svg)](https://github.com/OpenIDC/cjose/actions/workflows/codeql-analysis.yml)
[![Coverity Scan Build Status](https://scan.coverity.com/projects/31314/badge.svg)](https://scan.coverity.com/projects/openidc-cjose)

# cjose #

*This is a maintained fork of the abandoned [cisco/cjose](https://github.com/cisco/cjose) project.*

Implementation of JOSE for C/C++

## Prerequisites ##

* pkg-config (>= 0.20)
* GNU Make >= 3.81
* GCC >= 4.5
* Autoconf (>= 2.69)
* Automake (>= 1.14)
* libtool (>= 2.4)
* Check (>= 0.9.4) - unit testing
* Doxygen (>= 1.8) - documentation
* clang-format (= 3.9.0)
* OpenSSL >= 3.0.0 (or its API equivalent)
* Jansson >= 2.3

## Getting Started ##

As with most autoconf/automake projects:

    git clone https://github.com/OpenIDC/cjose.git
    cd cjose
    ./configure && make

### Common Options ###

    PKG_CONFIG_PATH environment variable: specify the search path where OpenSSL and Jansson can be found by pkg-config
    --disable-shared: Only build static library

### Debug Mode ###

To compile in debug mode (minimal optimization, active asserts, etc), specify the appropriate CFLAGS as a command-line argument when executing configure:

    ./configure CFLAGS="-g -O0 -DDEBUG"

## Tests ##

To execute the unit tests:

    make check

If successful, the list of checks will be displayed on the console.  Otherwise, the file "test/test-suite.log" will list the specific test(s) that failed.

## API Docs ##

To generate Doxygen API documentation:

    make doxygen

Which will place the generated documentation in "doc/html".

## From Scratch ##

To rebuild all of the project -- including those files generated by autoconf and automake:

    autoreconf --force --install

## Troubleshooting ##

### Configure can't find check.h header file.

This has been seen on Mac OSX 10.8 and 10.9 when check has been installed
via brew.  A solution is to explicitly include the /usr/local/include directory
in the cflags:

    ./configure CFLAGS="-I/usr/local/include"

## Contributing ##

### Before Submitting PR ###

* Run `make clang-format`
* Run `make test`
